{"changed":false,"filter":false,"title":"script.js","tooltip":"/public/subpages/AvgRGB/script.js","undoManager":{"mark":24,"position":24,"stack":[[{"start":{"row":21,"column":33},"end":{"row":22,"column":0},"action":"insert","lines":["",""],"id":1},{"start":{"row":22,"column":0},"end":{"row":22,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":22,"column":8},"end":{"row":22,"column":9},"action":"insert","lines":["h"],"id":2}],[{"start":{"row":22,"column":9},"end":{"row":22,"column":10},"action":"insert","lines":["i"],"id":3}],[{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"insert","lines":["d"],"id":4}],[{"start":{"row":22,"column":8},"end":{"row":22,"column":11},"action":"remove","lines":["hid"],"id":5},{"start":{"row":22,"column":8},"end":{"row":22,"column":14},"action":"insert","lines":["hidden"]}],[{"start":{"row":22,"column":14},"end":{"row":22,"column":15},"action":"insert","lines":["."],"id":6}],[{"start":{"row":22,"column":15},"end":{"row":22,"column":16},"action":"insert","lines":["c"],"id":7}],[{"start":{"row":22,"column":16},"end":{"row":22,"column":17},"action":"insert","lines":["l"],"id":8}],[{"start":{"row":22,"column":17},"end":{"row":22,"column":18},"action":"insert","lines":["a"],"id":9}],[{"start":{"row":22,"column":15},"end":{"row":22,"column":18},"action":"remove","lines":["cla"],"id":10},{"start":{"row":22,"column":15},"end":{"row":22,"column":24},"action":"insert","lines":["className"]}],[{"start":{"row":22,"column":24},"end":{"row":22,"column":25},"action":"insert","lines":[" "],"id":11}],[{"start":{"row":22,"column":25},"end":{"row":22,"column":26},"action":"insert","lines":["="],"id":12}],[{"start":{"row":22,"column":26},"end":{"row":22,"column":27},"action":"insert","lines":[" "],"id":13}],[{"start":{"row":22,"column":27},"end":{"row":22,"column":29},"action":"insert","lines":["''"],"id":14}],[{"start":{"row":22,"column":28},"end":{"row":22,"column":29},"action":"insert","lines":["h"],"id":15}],[{"start":{"row":22,"column":29},"end":{"row":22,"column":30},"action":"insert","lines":["i"],"id":16}],[{"start":{"row":22,"column":30},"end":{"row":22,"column":31},"action":"insert","lines":["d"],"id":17}],[{"start":{"row":22,"column":31},"end":{"row":22,"column":32},"action":"insert","lines":["d"],"id":18}],[{"start":{"row":22,"column":28},"end":{"row":22,"column":32},"action":"remove","lines":["hidd"],"id":19},{"start":{"row":22,"column":28},"end":{"row":22,"column":34},"action":"insert","lines":["hidden"]}],[{"start":{"row":22,"column":35},"end":{"row":22,"column":36},"action":"insert","lines":["l"],"id":20}],[{"start":{"row":22,"column":35},"end":{"row":22,"column":36},"action":"remove","lines":["l"],"id":21}],[{"start":{"row":22,"column":35},"end":{"row":22,"column":36},"action":"insert","lines":[";"],"id":22}],[{"start":{"row":37,"column":0},"end":{"row":40,"column":1},"action":"remove","lines":["//On canvas click","function canvasClick() {","    ","}"],"id":23}],[{"start":{"row":36,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["",""],"id":24}],[{"start":{"row":35,"column":1},"end":{"row":36,"column":0},"action":"remove","lines":["",""],"id":25}],[{"start":{"row":0,"column":0},"end":{"row":83,"column":0},"action":"remove","lines":["//Ian Draves Copyright 2017 (C)","","//Defining global variables","var rgbStr;","","//Function for image drop","function processImage(image) {","    var rgbval = document.getElementById(\"rgbval\");","    var img = document.getElementById('image');","    var color = document.getElementById('color');","    var hidden = document.getElementById('hiddenstuff');","","    //Unhiding elements","    img.className = 'unhiddenimg';","    hidden.className = 'unhidden';","","    img.src = URL.createObjectURL(image);","","    //Making sure the slected file is an image","    if (!image.name.match(/.(jpg|jpeg|png|gif)$/i)) {","        alert('The selected file is not an image!');","        img.className = 'hidden';","        hidden.className = 'hidden';","        return;","    }","","    img.onload = function() {","        var rgb = getAverageColor(img);","        rgbStr = rgb.r + ', ' + rgb.g + ', ' + rgb.b;","        color.style = \"background-color: rgb(\" + rgbStr + \");\";","        color.className = 'unhidden';","","        //Showing user RGB value","        rgbval.innerHTML = \"<b>RGB Value: </b>\" + rgbStr;","    };","}","","//Function to get average rgb","function getAverageColor(img) {","    var canvas = document.createElement('canvas');","    var ctx = canvas.getContext('2d');","    var width = canvas.width = img.naturalWidth;","    var height = canvas.height = img.naturalHeight;","","    ctx.drawImage(img, 0, 0);","","    var imageData = ctx.getImageData(0, 0, width, height);","    var data = imageData.data;","    var r = 0;","    var g = 0;","    var b = 0;","","    for (var i = 0, l = data.length; i < l; i += 4) {","        r += data[i];","        g += data[i + 1];","        b += data[i + 2];","    }","","    r = Math.floor(r / (data.length / 4));","    g = Math.floor(g / (data.length / 4));","    b = Math.floor(b / (data.length / 4));","","    return {","        r: r,","        g: g,","        b: b","    };","}","","//When user hovers over page with image","document.ondragover = function(event) {","    event.preventDefault();","    event.dataTransfer.dropEffect = 'copy';","};","","//When user drops image on page","document.ondrop = function(event) {","    event.preventDefault();","    var images = event.dataTransfer.files;","    for (var i = 0; i < images.length; i++) {","        processImage(images[i]);","    }","};",""],"id":30,"ignore":true}]]},"ace":{"folds":[],"scrolltop":913.5,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":83,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":56,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1495923775919}